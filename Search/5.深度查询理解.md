- [深度查询理解](#深度查询理解)
  - [1. 意图识别(intention recognition)](#1-意图识别intention-recognition)
  - [2. 查询改写](#2-查询改写)
  - [3.查询纠错](#3查询纠错)
    - [1. 基于词典进行纠错](#1-基于词典进行纠错)
    - [2. 基于模型纠错](#2-基于模型纠错)
    - [3.方案调研](#3方案调研)
  - [4.实体链接](#4实体链接)
  - [5.实体识别](#5实体识别)
  - [6.地址识别](#6地址识别)
  - [7.异地识别](#7异地识别)
  - [8.中文分词](#8中文分词)
  - [9.词权重](#9词权重)
    - [单字模型词权重](#单字模型词权重)

# 深度查询理解

## 1. 意图识别(intention recognition)

- 意图召回:
词典+规则+模型(bert等)
- 意图分布
多个召回候选意图实现可比较，从而解决更精准的搜索意图预测问题

## 2. 查询改写
查询改写是为了对原始query进行扩充，提供关联度较高的query，提高召回的一种手段。
- 1.查询语言和商家语言的gap, 小孩游泳 -> 儿童游泳，剧情杀->剧本杀
- 2.一义多词:理发，剪头，美发
- 3.一词多义:结婚照 -> 婚纱照，结婚证件

方法:
- 1.知识库
- 2.session
- 3.翻译模型(nmt)
- 4.语义:word2vec,dssm

高精度的词典改写，较高精度的模型改写(基于SMT统计翻译模型和XGBoost排序模型，以及NMT模型)

## 3.查询纠错
查询纠错（query correct）是指搜索中主动识别用户输入query中的错误，这种错误主要包括近音字，形近字，以及其他错误。识别出query中的错误后给出正确的提示query，或者直接修正用户的query并返回相应的检索结果。 在美团电商场景下，主要是商家名，地标，品牌等短文本的纠错。

提升用户体验，增加用户粘性。
```
基础通用版本的查询纠错算法分成四个部分：候选集选取，语言模型，排序以及终判的分类模型。
候选集选取：
通过搜索日志以及用户session分析处理，统计query的共线频率，过滤后使用编辑距离进行候选集合选取； 借鉴统计机器翻译的思想，训练翻译模型对query的整句进行变化，考虑session上下文信息，获取候选集合；
语言模型： 使用搜索query日志训练n-gram语言模型，过滤ppl较大的query；
排序模型：
经过语言模型的候选集合进行排序，排序主要特征有ppl，ctr以及其他的统计特征，通用版本目前支持svm ranking以及xgboost模型；
分类模型：
将最终选取的纠错query进行二分类，作为是否采用此纠错结果的终判，通用版本支持lr, 朴素贝叶斯，svm以及树模型；
```
比例: 地图场景3%
- 同音异形: 来广营”误写作“来广盈"
- 拼音: 九宫格错误
- 形近字

### 1. 基于词典进行纠错
根据点击日志挖掘常见的纠错对，常见的做法有一些条件，如命中poi，不进行纠错，过滤城市信息

### 2. 基于模型纠错
- 1.候选生成: (召回)同音/近音/形近，挖掘常见错误词，多义字
- 2.特征构建: 统计特征、语义特征、基础特征、差异特征
- 3.打分

### 3.方案调研


## 4.实体链接

```
预处理层，通过对Query进行分词和NER识别后，实体链接会对其中的实体成分进行提及识别(Mention Detection)[6]和不连接词识别(NonLink Detection)[7]两个步骤，用于识别查询词中的Term组合成分哪些需要去链接实体，哪些不需要链接实体；
召回层，召回层主要借助搜索引擎，利用离线挖掘的Mention-实体对数据构建搜索服务，在线对识别到的提及(Mention)进行候选实体的召回；
排序层，主要利用离线计算的Mention-实体基础分，并结合当前搜索的上下文信息(主要包括文本上下文、地理上下文、城市上下文)进行上下文分进行综合计算排序，得到实体链接的最大概率结果；
推理层，通过利用实体之间的文本属性关系，地理归属关系，位置关系，将有相关依存关联关系的实体进行合并，做到更精准的理解；
```

## 5.实体识别

## 6.地址识别

## 7.异地识别

## 8.中文分词

## 9.词权重
用户输入的搜索query中词的重要性分数，即为词权重(Term Weight)
- 衡量分词term的重要程度
- 丢词、文档相关性、排序、成分分析、改写
- 核心词

xgboost特征:
- NER类型
- 出现在qeury语料idf,poi的idf,ugc的idf,点击商户类目分布熵
- 前后词PMI(Pointwise Mutual Information)、前后词NER类型等

### 单字模型词权重
统计每个单字的term weight, 对应到term进行单字概率的累加

- Attention based Term Weighting for App Retrieval
- [搜索中词权重计算及实践](https://www.cnblogs.com/sxron/p/9992538.html)